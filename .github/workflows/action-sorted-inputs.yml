# yamllint disable rule:line-length
---
name: action-inputs-sorted-check
on:
  push:
    paths:
      - action.yml
permissions:
  contents: read
jobs:
  check-action-inputs-sorted:
    runs-on: ubuntu-24.04
    steps:
      - uses: actions/checkout@v6.0.1
      - name: Validate input key order in action.yml
        run: |
          inputs_file="action.yml"

          current=$(yq e '.inputs | keys' "${inputs_file}" | sed 's/^- //')
          sorted=$(echo "${current}" | sort)

          if [[ "${current}" != "${sorted}" ]]; then
            echo "âŒ Inputs in ${inputs_file} are not sorted alphabetically."
            echo
            echo "ğŸ” Current order:"
            echo "${current}"
            echo
            echo "âœ… Expected order:"
            echo "${sorted}"
            echo
            echo "ğŸ§© Suggested changes (move lines):"

            paste <(echo "${current}") <(echo "${sorted}") | awk '$1 != $2 { printf "  Move \"%s\" to where \"%s\" is.\n", $1, $2 }'

            exit 1
          else
            echo "âœ… Inputs in ${inputs_file} are sorted alphabetically!"
          fi
